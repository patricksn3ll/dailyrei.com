<template>
   <section class="penci-section penci-dmcheck penci-elbg-activate penci-disSticky penci-structure-10 elementor-section elementor-top-section elementor-element elementor-element-cfd7cf5 elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="cfd7cf5" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
      <div class="elementor-container elementor-column-gap-no">
         <div class="penci-ercol-100 penci-ercol-order-1 penci-sticky-ct elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-7c863e8" data-id="7c863e8" data-element_type="column">
            <div class="elementor-widget-wrap elementor-element-populated">
               <div class="elementor-element elementor-element-3ec2eb1 elementor-widget elementor-widget-penci-fancy_heading" data-id="3ec2eb1" data-element_type="widget" data-widget_type="penci-fancy_heading.default">
                  <div class="elementor-widget-container">
                     <div class="penci-fancy-heading penci-heading-text-center">
                        <div class="penci-fancy-heading-inner">
                           <h2 class="penci-heading-title"><span class="inner-tit">{{ selectedCategory }}</span></h2>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="elementor-element elementor-element-7a23a27 elementor-widget-divider--view-line elementor-widget elementor-widget-divider" data-id="7a23a27" data-element_type="widget" data-widget_type="divider.default">
                  <div class="elementor-widget-container">
                     <div class="elementor-divider"> <span class="elementor-divider-separator"> </span> </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </section>
   <section class="penci-section penci-dmcheck penci-elbg-activate penci-disSticky penci-structure-20 elementor-section elementor-top-section elementor-element elementor-element-c0c9e46 elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="c0c9e46" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
      <div class="elementor-container elementor-column-gap-no">
         <div class="penci-ercol-50 penci-ercol-order-1 penci-sticky-ct elementor-column elementor-col-50 elementor-top-column elementor-element elementor-element-83c4004" data-id="83c4004" data-element_type="column">
            <div class="elementor-widget-wrap elementor-element-populated">
               <section class="penci-section penci-disSticky penci-structure-30 elementor-section elementor-inner-section elementor-element elementor-element-108015e elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="108015e" data-element_type="section">
                  <div class="elementor-container elementor-column-gap-no">
                     <div class="penci-ercol-33 penci-ercol-order-1 penci-sticky-sb penci-sidebarSC elementor-column elementor-col-33 elementor-inner-column elementor-element elementor-element-88f09b1" data-id="88f09b1" data-element_type="column">
                        <div class="elementor-widget-wrap elementor-element-populated">
                           <div class="elementor-element elementor-element-0ed7fea elementor-widget elementor-widget-image" data-id="0ed7fea" data-element_type="widget" data-widget_type="image.default">
                              <div class="elementor-widget-container">
                                 <a href="/category/education/"> <img decoding="async" width="600" height="400" src="/assets/images/c1.png" data-src="/assets/images/c1.png" class="penci-lazy attachment-large size-large wp-image-747 lazyloaded pcloaded" alt="" data-srcset="/assets/images/c1.png" sizes="(max-width: 600px) 100vw, 600px" data-ll-status="loaded" srcset="/assets/images/c1.png"> </a>
                              </div>
                           </div>
                           <div class="elementor-element elementor-element-e2e6350 elementor-widget elementor-widget-penci-fancy_heading" data-id="e2e6350" data-element_type="widget" data-widget_type="penci-fancy_heading.default">
                              <div class="elementor-widget-container">
                                 <div class="penci-fancy-heading penci-heading-text-center">
                                    <div class="penci-fancy-heading-inner">
                                       <h2 class="penci-heading-title"><span class="inner-tit"><a href="/category/education/">Education</a></span></h2>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="elementor-element elementor-element-23e7cc8 elementor-widget elementor-widget-image" data-id="23e7cc8" data-element_type="widget" data-widget_type="image.default">
                              <div class="elementor-widget-container"> <a href="/category/finance/"> <img decoding="async" width="600" height="400" src="/assets/images/c3.png" > </a> </div>
                           </div>
                           <div class="elementor-element elementor-element-7002e1a elementor-widget elementor-widget-penci-fancy_heading" data-id="7002e1a" data-element_type="widget" data-widget_type="penci-fancy_heading.default">
                              <div class="elementor-widget-container">
                                 <div class="penci-fancy-heading penci-heading-text-center">
                                    <div class="penci-fancy-heading-inner">
                                       <h2 class="penci-heading-title"><span class="inner-tit"><a href="/category/finance/">Finance</a></span></h2>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="penci-ercol-33 penci-ercol-order-2 penci-sticky-sb penci-sidebarSC elementor-column elementor-col-33 elementor-inner-column elementor-element elementor-element-8c213c2" data-id="8c213c2" data-element_type="column">
                        <div class="elementor-widget-wrap elementor-element-populated">
                           <div class="elementor-element elementor-element-00f3bc0 elementor-widget elementor-widget-image" data-id="00f3bc0" data-element_type="widget" data-widget_type="image.default">
                              <div class="elementor-widget-container"> <a href="/category/investing/"> <img decoding="async" width="600" height="400" src="/assets/images/c5.png" > </a> </div>
                           </div>
                           <div class="elementor-element elementor-element-abc57ee elementor-widget elementor-widget-penci-fancy_heading" data-id="abc57ee" data-element_type="widget" data-widget_type="penci-fancy_heading.default">
                              <div class="elementor-widget-container">
                                 <div class="penci-fancy-heading penci-heading-text-center">
                                    <div class="penci-fancy-heading-inner">
                                       <h2 class="penci-heading-title"><span class="inner-tit"><a href="/category/investing/">Investing</a></span></h2>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="elementor-element elementor-element-91c4e9f elementor-widget elementor-widget-image" data-id="91c4e9f" data-element_type="widget" data-widget_type="image.default">
                              <div class="elementor-widget-container"> <a href="/category/legal/"> <img decoding="async" width="600" height="400" src="/assets/images/c4.png" > </a> </div>
                           </div>
                           <div class="elementor-element elementor-element-036c2f7 elementor-widget elementor-widget-penci-fancy_heading" data-id="036c2f7" data-element_type="widget" data-widget_type="penci-fancy_heading.default">
                              <div class="elementor-widget-container">
                                 <div class="penci-fancy-heading penci-heading-text-center">
                                    <div class="penci-fancy-heading-inner">
                                       <h2 class="penci-heading-title"><span class="inner-tit"><a href="/category/legal/">Legal</a></span></h2>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="penci-ercol-33 penci-ercol-order-3 penci-sticky-sb penci-sidebarSC elementor-column elementor-col-33 elementor-inner-column elementor-element elementor-element-ab81bbe" data-id="ab81bbe" data-element_type="column">
                        <div class="elementor-widget-wrap elementor-element-populated">
                           <div class="elementor-element elementor-element-f5fd93c elementor-widget elementor-widget-image" data-id="f5fd93c" data-element_type="widget" data-widget_type="image.default">
                              <div class="elementor-widget-container"> <a href="/category/market/"> <img decoding="async" width="600" height="400" src="/assets/images/c2.png"> </a> </div>
                           </div>
                           <div class="elementor-element elementor-element-b0f7603 elementor-widget elementor-widget-penci-fancy_heading" data-id="b0f7603" data-element_type="widget" data-widget_type="penci-fancy_heading.default">
                              <div class="elementor-widget-container">
                                 <div class="penci-fancy-heading penci-heading-text-center">
                                    <div class="penci-fancy-heading-inner">
                                       <h2 class="penci-heading-title"><span class="inner-tit"><a href="/category/market/">Market</a></span></h2>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="elementor-element elementor-element-745d194 elementor-widget elementor-widget-image" data-id="745d194" data-element_type="widget" data-widget_type="image.default">
                              <div class="elementor-widget-container"> <a href="/category/news/"> <img decoding="async" width="600" height="400" src="/assets/images/c6.png" > </a> </div>
                           </div>
                           <div class="elementor-element elementor-element-f28c13f elementor-widget elementor-widget-penci-fancy_heading" data-id="f28c13f" data-element_type="widget" data-widget_type="penci-fancy_heading.default">
                              <div class="elementor-widget-container">
                                 <div class="penci-fancy-heading penci-heading-text-center">
                                    <div class="penci-fancy-heading-inner">
                                       <h2 class="penci-heading-title"><span class="inner-tit"><a href="/category/news/">News</a></span></h2>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </section>
               <section class="penci-section penci-disSticky penci-structure-10 elementor-section elementor-inner-section elementor-element elementor-element-97b64f8 elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="97b64f8" data-element_type="section">
                  <div class="elementor-container elementor-column-gap-default">
                     <div class="penci-ercol-100 penci-ercol-order-1 penci-sticky-ct elementor-column elementor-col-100 elementor-inner-column elementor-element elementor-element-37cb3fd" data-id="37cb3fd" data-element_type="column">
                        <div class="elementor-widget-wrap elementor-element-populated">
                           <div class="elementor-element elementor-element-b9b842a elementor-widget elementor-widget-image" data-id="b9b842a" data-element_type="widget" data-widget_type="image.default">
                              <div class="elementor-widget-container"> <img decoding="async" width="1024" height="592" src="/assets/images/world-1024x592.png"  class="penci-lazy attachment-large size-large wp-image-798 lazyloaded pcloaded" alt=""> </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </section>
            </div>
         </div>
         <div class="penci-ercol-50 penci-ercol-order-2 penci-sticky-ct elementor-column elementor-col-50 elementor-top-column elementor-element elementor-element-866851c" data-id="866851c" data-element_type="column">
            <div class="elementor-widget-wrap elementor-element-populated">
               <div class="elementor-element elementor-element-20cbc04 elementor-widget elementor-widget-penci-big-grid" data-id="20cbc04" data-element_type="widget" data-widget_type="penci-big-grid.default">
                  <div class="elementor-widget-container">
                     <div class="penci-clearfix penci-biggrid-wrapper penci-grid-col-2 penci-grid-mcol-1 penci-bgrid-based-post penci-bgrid-style-1 pcbg-ficonpo-top-right pcbg-reiconpo-top-left penci-bgrid-content-below pencibg-imageh-none pencibg-texth-none pencibg-textani-movetop textop">
                        <div class="penci-clearfix penci-biggrid penci-bgstyle-1 penci-bgel">
                           <div class="penci-biggrid-inner default">
                              <div class="penci-clearfix penci-biggrid-data penci-dflex">
                                 <div class="penci-bgitem" v-for="item in results.slice(0, 2)" :key="item">
                                    <div class="penci-bgitin">
                                       <div class="penci-bgmain">
                                          <div class="pcbg-thumb">
                                             <div class="pcbg-thumbin">
                                                <a class="pcbg-bgoverlay" :href="formatHref(item)" :title="formatTitle(item)"></a>
                                                <div class="penci-image-holder penci-lazy lazyloaded pcloaded" :data-bgset="formatImage(item)" :data_bg_hidpi="formatImage(item)" data-sizes="(max-width: 767px) 585px, 585px" data-ll-status="loaded" :style="formatBgImage(item)"> </div>
                                             </div>
                                          </div>
                                          <div class="pcbg-content">
                                             <div class="pcbg-content-flex">
                                                <a class="pcbg-bgoverlay" :href="formatHref(item)" :title="formatTitle(item)"></a>
                                                <div class="pcbg-content-inner bgcontent-block">
                                                   <a :href="formatHref(item)" :title="formatTitle(item)" class="pcbg-bgoverlaytext item-hover"></a>
                                                   <div class="pcbg-heading item-hover">
                                                      <h3 class="pcbg-title"> <a :href="formatHref(item)"> {{ formatTitle(item) }}</a> </h3>
                                                   </div>
                                                   <div class="grid-post-box-meta pcbg-meta item-hover">
                                                      <div class="pcbg-meta-desc"> <span class="bg-date"><time class="entry-date published" :datetime="formatPublishDate(item)">{{  formatTimeSince(item) }}</time></span> </div>
                                                   </div>
                                                </div>
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="elementor-element elementor-element-50b6d31 elementor-widget elementor-widget-penci-big-grid" data-id="50b6d31" data-element_type="widget" data-widget_type="penci-big-grid.default">
                  <div class="elementor-widget-container">
                     <div class="penci-clearfix penci-biggrid-wrapper penci-grid-col-3 penci-grid-mcol-1 penci-bgrid-based-post penci-bgrid-style-1 pcbg-ficonpo-top-right pcbg-reiconpo-top-left penci-bgrid-content-below pencibg-imageh-none pencibg-texth-none pencibg-textani-movetop textop">
                        <div class="penci-clearfix penci-biggrid penci-bgstyle-1 penci-bgel">
                           <div class="penci-biggrid-inner default">
                              <div class="penci-clearfix penci-biggrid-data penci-dflex">
                                 <div class="penci-bgitem" v-for="item in results.slice(2, 5)" :key="item">
                                    <div class="penci-bgitin">
                                       <div class="penci-bgmain">
                                          <div class="pcbg-thumb">
                                             <div class="pcbg-thumbin">
                                                <a class="pcbg-bgoverlay" :href="formatHref(item)" :title="formatTitle(item)"></a>
                                                <div class="penci-image-holder penci-lazy lazyloaded pcloaded" :data-bgset="formatImage(item)" :data_bg_hidpi="formatImage(item)" data-sizes="(max-width: 767px) 585px, 585px" data-ll-status="loaded" :style="formatBgImage(item)"> </div>
                                             </div>
                                          </div>
                                          <div class="pcbg-content">
                                             <div class="pcbg-content-flex">
                                                <a class="pcbg-bgoverlay" :href="formatHref(item)" :title="formatTitle(item)"></a>
                                                <div class="pcbg-content-inner bgcontent-block">
                                                   <a href="" title="" class="pcbg-bgoverlaytext item-hover"></a>
                                                   <div class="pcbg-heading item-hover">
                                                      <h3 class="pcbg-title"> <a :href="formatHref(item)"> {{ formatTitle(item) }} </a> </h3>
                                                   </div>
                                                   <div class="grid-post-box-meta pcbg-meta item-hover">
                                                      <div class="pcbg-meta-desc"> <span class="bg-date"><time class="entry-date published" :datetime="formatPublishDate(item)">{{  formatTimeSince(item) }}</time></span> </div>
                                                   </div>
                                                </div>
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </section>
</template>

<script lang="ts">
  import {formatHref, formatTitle, formatCategoryHref, formatAuthor, formatAuthorHref, formatPublishDate, formatTimeSince, formatImage, formatBgImage} from '../assets/js/utilities.js'

  export default {
    name: 'CategoryDark',
    components: {

    },
    setup() {

    },
    props: {
      selectedCategory : {
        type: String,
        default: 'Finance'
      },
    },
    data() {
      return {
        results: [] as any,
        pageCounter: 0,
        pageSize: 6,
      }
    },
    methods: {
      fecthContent: function() {
        let url = `${import.meta.env.VITE_API_BASE_URL}/api/GetFeedItemsByCategory?category=${this.selectedCategory.toLocaleLowerCase()}&domain=${import.meta.env.VITE_DOMAIN}&offset=${this.pageSize * this.pageCounter}&limit=${this.pageSize}&score=.1`
        fetch(url)
          .then(response => response.json())
          .then(json => {
            this.results = this.results.concat(json)
            this.pageCounter++
          })
      },
      formatHref: function(item:any) {
        return formatHref(item)
      },
      formatTitle: function(item:any) {
        return formatTitle(item)
      },
      formatImage: function(item:any) {
        return formatImage(item)
      },
      formatAuthor: function(item:any) {
        return formatAuthor(item)
      },
      formatBgImage: function(item:any) {
        return formatBgImage(item)
      },
      formatCategoryHref: function(item:any) {
        return formatCategoryHref(item)
      },
      formatAuthorHref: function(item:any) {
        return formatAuthorHref(item)
      },
      formatPublishDate: function(item:any) {
        return formatPublishDate(item)
      },
      formatTimeSince: function(item:any) {
        return formatTimeSince(item)
      },
    },
    beforeMount() {
      this.fecthContent()
    },
  };
  </script>
